{% extends "components/main/base.html" %}
{% block content %}
<section class="hero is-large is-info">
    <div class="hero-body">
        <p class="title">SWOT ANALYZER</p>
        <p class="subtitle">Strengths, Weaknesses, Opportunities and Threats
            breakdown, courtesy of Generative AI-driven insights.</p>
        <p>Try it out now!</p>
    </div>
</section>
<section class="section">
    <div class="container">
        <h1 class="title">Search Here</h1>
        <Search form_id="swotSearch"
                action="/analyze"
                target="status"
                method="post">
            <div class="field mt-1 pt-1">
                <div class="control">
                    <button type="submit"
                            class="button is-success"
                            hx-on:click="
                    const [status, result] = ['#status', '#result'].map(id => document.querySelector(id));
                    status.style.display = 'block';
                    result.style.display = 'none';
                    ">Analyze</button>
                </div>
            </div>
        </Search>
    </div>
</section>
<section class="section">
    <div class="container"
         id="swotAnalysis">
        <div class="box"
             id="status"
             hx-get='/status'
             hx-trigger='load, every 1s'
             hx-swap='innerHTML transition: false'
             style="display: none">
        </div>
        <div class="box"
             id="result"
             hx-get='/result'
             hx-trigger="load, every 1s[!this.querySelector('#result-container') || this.style.display === 'none']"
             hx-swap='innerHTML'
             hx-on:after-request="
                if(this.innerHTML.trim().length > 0) {
                const statusDiv = document.querySelector(#status);
                if (statusDiv) statusDiv.style.display = 'none';
                this.style.display = 'block'
                }
                ">
        </div>
    </div>
</section>
{% endblock content %}